import S from'cross-fetch';var g=fetch||S;var r=class extends Error{error;details;documentationUrl;constructor(e){super(e.message||"An unexpected error occurred"),this.error=e.error||"internal-error",this.details=e.details||"An unexpected error occurred",this.documentationUrl=e.documentationUrl||"",this.name="SupadataError";}};var f={version:"1.3.2"};var P=`supadata-js/${f.version}`,s=class{config;constructor(e){this.config=e;}async fetch(e,t={},a="GET"){let n=`${this.config.baseUrl||"https://api.supadata.ai/v1"}${e.startsWith("/")?e:`/${e}`}`;if(a==="GET"&&Object.keys(t).length>0){let u=new URLSearchParams;Object.entries(t).forEach(([o,l])=>{l!=null&&(Array.isArray(l)?l.forEach(x=>u.append(o,String(x))):u.append(o,String(l)));}),n+=`?${u.toString()}`;}return this.fetchUrl(n,a,t)}async fetchUrl(e,t="GET",a){let i={method:t,headers:{"x-api-key":this.config.apiKey,"Content-Type":"application/json","User-Agent":P}};t==="POST"&&a&&(i.body=JSON.stringify(a));let n=await g(e,i),u=n.headers.get("content-type");if(!n.ok)if(u?.includes("application/json")){let o=await n.json();throw new r(o)}else throw new r({error:"internal-error",message:"Unexpected error response format",details:await n.text()});try{if(!u?.includes("application/json"))throw new r({error:"internal-error",message:"Invalid response format",details:"Expected JSON response but received different content type"});return await n.json()}catch(o){throw new r({error:"internal-error",message:"Failed to parse response",details:o instanceof Error?o.message:"Unknown error"})}}};var b=class extends s{transcript=Object.assign(async e=>this.fetch("/youtube/transcript",e),{batch:async e=>(this.validateLimit(e,1,5e3,"batch operation"),this.fetch("/youtube/transcript/batch",e,"POST"))});video=Object.assign(async e=>this.fetch("/youtube/video",e),{batch:async e=>(this.validateLimit(e,1,5e3,"batch operation"),this.fetch("/youtube/video/batch",e,"POST"))});channel=Object.assign(async e=>this.fetch("/youtube/channel",e),{videos:async e=>(this.validateLimit(e),this.fetch("/youtube/channel/videos",e))});playlist=Object.assign(async e=>this.fetch("/youtube/playlist",e),{videos:async e=>(this.validateLimit(e),this.fetch("/youtube/playlist/videos",e))});batch={getBatchResults:async e=>{if(!e)throw new r({error:"invalid-request",message:"Missing jobId",details:"The jobId parameter is required to get batch results."});return this.fetch(`/youtube/batch/${e}`)}};translate=async e=>this.fetch("/youtube/transcript/translate",e);search=async e=>{if(!e.query)throw new r({error:"invalid-request",message:"Missing query parameter",details:"The query parameter is required for search."});return this.validateLimit(e,1,5e3,"search"),this.fetch("/youtube/search",e)};validateLimit(e,t=1,a=5e3,i="operation"){if(e.limit!=null&&e.limit!=null&&(e.limit<t||e.limit>a))throw new r({error:"invalid-request",message:`Invalid limit for ${i}.`,details:`The limit must be between ${t} and ${a}.`})}};var h=class extends s{async scrape(e){return this.fetch("/web/scrape",{url:e})}async map(e){return this.fetch("/web/map",{url:e})}async crawl(e){return this.fetch("/web/crawl",e,"POST")}async getCrawlResults(e){let t,a=[],i;do t=await(i?this.fetchUrl(i):this.fetch(`/web/crawl/${e}`)),t.pages&&(a=[...a,...t.pages]),i=t.next;while(i);return t}};var m=class extends s{get=async e=>this.fetch("/transcript",e);getJobStatus=async e=>{if(!e)throw new r({error:"invalid-request",message:"Missing jobId",details:"The jobId parameter is required to get transcript job status."});return this.fetch(`/transcript/${e}`)}};var y=class extends s{youtube;web;_transcriptService;constructor(e){super(e),this.youtube=new b(e),this.web=new h(e),this._transcriptService=new m(e);}transcript=Object.assign(async e=>this._transcriptService.get(e),{getJobStatus:e=>this._transcriptService.getJobStatus(e)});metadata=async e=>this.fetch("/metadata",e)};
export{s as BaseClient,y as Supadata,r as SupadataError,m as TranscriptService,h as WebService,b as YouTubeService};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map